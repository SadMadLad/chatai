<%= link_to 'Add new user', [:new, :admin, :user] %>
<hr />

<table class="table-auto text-sm">
  <thead class="bg-gray-100">
    <tr>
      <th>Email</th>
      <th>Login Count</th>
      <th>Current Login</th>
      <th>Latest Login</th>
      <th>Current Login IP</th>
      <th>Last Login IP</th>
      <th>Created At</th>
      <th>Updated At</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr class="border-b">
        <td><%= user.email %></td>
        <td><%= user.sign_in_count %></td>
        <td><%= user.current_sign_in_at %></td>
        <td><%= user.last_sign_in_at %></td>
        <td><%= user.current_sign_in_ip %></td>
        <td><%= user.last_sign_in_ip %></td>
        <td><%= user.created_at %></td>
        <td><%= user.updated_at %></td>
        <td>
          <% if (current_account.superadmin? && user.account.can_moderate?) || user.account.user? %>
            <%= link_to 'Show', [:admin, user] %>
            <%= link_to 'Edit', [:edit, :admin, user] %>
            <%= button_to 'Delete', [:admin, user], method: :delete %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
<table>

<%== pagy_nav(@pagy) %>
